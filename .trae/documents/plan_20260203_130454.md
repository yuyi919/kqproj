## 目标
在 `src/pages/api/socket.ts` 中实现 Socket.io 服务端，并创建一个专门的调试页面来测试 WebSocket 的连接、房间加入及消息收发功能。

## 技术方案

### 1. 服务端集成 (Pages Router)
- **入口文件**: `src/pages/api/socket.ts`
  - 利用 `res.socket.server` 挂载 `socket.io`。
  - 解决 Next.js API 路由中的 Body 解析冲突（设置 `config.api.bodyParser = false`）。
- **逻辑层**: `src/server/api/socket-io.ts`
  - 实现简单的“回显” (Echo) 逻辑或基本的房间广播逻辑，用于验证功能。

### 2. 前端客户端集成
- **连接 Hook**: `src/hooks/use-socket.ts`
  - 封装 `socket.io-client` 的初始化、事件监听和消息发送逻辑。
  - 支持连接状态跟踪 (Connected/Disconnected)。

### 3. 自定义测试页面 (Testing Page)
- **页面路径**: `src/app/debug/socket/page.tsx`
- **功能设计**:
  - **连接控制**: 显示当前连接状态（绿灯/红灯），提供手动重连按钮。
  - **房间管理**: 输入房间名并点击“加入房间”。
  - **消息控制**: 输入测试消息并发送。
  - **日志面板**: 实时打印从服务端接收到的事件及其 Payload，支持清空日志。

### 4. 依赖安装
- `socket.io`
- `socket.io-client`

## 待办事项
1. [ ] 安装 `socket.io` 相关依赖。
2. [ ] 实现 `src/pages/api/socket.ts` 服务端逻辑。
3. [ ] 封装 `src/hooks/use-socket.ts` 客户端 Hook。
4. [ ] 创建 `src/app/debug/socket/page.tsx` 测试页面并实现 UI。
5. [ ] 启动服务并验证端到端通信。

是否开始执行该计划并编写测试页面？