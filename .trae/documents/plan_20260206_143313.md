## Next.js 路由结构重构计划

### 1. 清理遗留路由
当前 `src/app/api/[[...route]]/route.ts` 已经接管了大部分 API 请求（`auth`, `data`, `live`），但可能仍有一些分散的路由文件或页面需要整理。

- **检查点**：
  - 确认 `src/pages/api/socket.ts` (Pages Router) 的保留必要性。目前用于 Socket.io，这是 Next.js App Router 暂不支持的特性，因此需要**保留**。
  - 确认 `src/app` 下是否存在旧的、未迁移的 API 路由。目前看来只有 `[[...route]]`，结构清晰。

### 2. 规范化页面路由结构
根据 Monorepo 和 Refine 项目的最佳实践，建议对 `src/app` 下的页面路由进行分组整理，以提高可维护性。

#### 拟定结构优化：
将业务页面移动到 `(routes)` 路由组中，分离 Auth 相关页面和受保护的业务页面。

```text
src/app/
├── (auth)/             # 认证相关页面 (分组，不影响 URL)
│   ├── login/
│   ├── register/
│   ├── forgot-password/
│   └── update-password/
├── (protected)/        # 受保护的业务页面 (分组，不影响 URL)
│   ├── layout.tsx      # 统一的鉴权布局
│   ├── blog-posts/
│   ├── categories/
│   ├── users/
│   └── room/
├── api/                # API 路由保持不变
│   └── [[...route]]/
├── debug/              # 调试工具保持不变
└── layout.tsx          # 根布局
```

### 3. 具体执行步骤

#### Step 1: 创建路由组
1. 创建 `src/app/(auth)` 目录。
2. 创建 `src/app/(protected)` 目录。

#### Step 2: 迁移 Auth 页面
1. 将以下目录移动到 `src/app/(auth)/`：
   - `login/`
   - `register/`
   - `forgot-password/`
   - `update-password/`
2. 移动 `src/components/auth-page` 到 `src/app/(auth)/_components` (可选，或保持在 components 中)。

#### Step 3: 迁移业务页面
1. 将以下目录移动到 `src/app/(protected)/`：
   - `blog-posts/`
   - `categories/`
   - `users/`
   - `room/`
2. **关键**：将原 `src/app/layout.tsx` 中的鉴权逻辑（如果有）下沉到 `src/app/(protected)/layout.tsx`，或者确保根布局能正确处理不同路由组的 Auth 状态。

#### Step 4: 验证
1. 运行 `pnpm dev`。
2. 验证登录、注册页面 URL 是否保持不变（路由组不会改变 URL 路径）。
3. 验证业务页面访问是否正常。

是否确认执行此路由重构？
