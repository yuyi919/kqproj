// This file was automatically generated by prisma-zero.
// You should NOT make any changes in this file as it will be overwritten.

import {
  boolean,
  createBuilder,
  createSchema,
  number,
  relationships,
  string,
  table,
} from "@rocicorp/zero";

export const groupMembersTable = table("group_members")
  .columns({
    id: string(),
    group_id: string(),
    user_id: string(),
    joined_at: number().optional(),
    role: string().optional(),
  })
  .primaryKey("id");

export const groupsTable = table("groups")
  .columns({
    id: string(),
    name: string(),
    description: string().optional(),
    is_default: boolean().optional(),
    created_at: number().optional(),
  })
  .primaryKey("id");

export const messagesTable = table("messages")
  .columns({
    id: string(),
    group_id: string(),
    user_id: string(),
    content: string(),
    created_at: number().optional(),
  })
  .primaryKey("id");

export const usersTable = table("users")
  .columns({
    id: string(),
    username: string().optional(),
    email: string().optional(),
    avatar_url: string().optional(),
    created_at: number().optional(),
  })
  .primaryKey("id");

export const groupMembersTableRelationships = relationships(groupMembersTable, ({ one }) => ({
  groups: one({
    sourceField: ["group_id"],
    destField: ["id"],
    destSchema: groupsTable,
  }),
  users: one({
    sourceField: ["user_id"],
    destField: ["id"],
    destSchema: usersTable,
  })
}));
export const groupsTableRelationships = relationships(groupsTable, ({ many }) => ({
  group_members: many({
    sourceField: ["id"],
    destField: ["group_id"],
    destSchema: groupMembersTable,
  }),
  messages: many({
    sourceField: ["id"],
    destField: ["group_id"],
    destSchema: messagesTable,
  })
}));
export const messagesTableRelationships = relationships(messagesTable, ({ one }) => ({
  groups: one({
    sourceField: ["group_id"],
    destField: ["id"],
    destSchema: groupsTable,
  }),
  users: one({
    sourceField: ["user_id"],
    destField: ["id"],
    destSchema: usersTable,
  })
}));
export const usersTableRelationships = relationships(usersTable, ({ many }) => ({
  group_members: many({
    sourceField: ["id"],
    destField: ["user_id"],
    destSchema: groupMembersTable,
  }),
  messages: many({
    sourceField: ["id"],
    destField: ["user_id"],
    destSchema: messagesTable,
  })
}));
/**
 * The Zero schema object.
 * This type is auto-generated from your Prisma schema definition.
 */
export const schema = createSchema({
  tables: [
    groupMembersTable,
    groupsTable,
    messagesTable,
    usersTable,
  ],
  relationships: [
    groupMembersTableRelationships,
    groupsTableRelationships,
    messagesTableRelationships,
    usersTableRelationships,
  ],
});

/**
 * Represents the Zero schema type.
 * This type is auto-generated from your Prisma schema definition.
 */
export type Schema = typeof schema;
/**
 * Represents the ZQL query builder.
 * This type is auto-generated from your Prisma schema definition.
 */
export const zql = createBuilder(schema);
/**
 * Represents the Zero schema query builder.
 * This type is auto-generated from your Prisma schema definition.
 *
 * @deprecated Use `zql` instead.
 */
export const builder = zql;
/** Defines the default types for Zero */
declare module "@rocicorp/zero" {
  interface DefaultTypes {
    schema: Schema;
  }
}
